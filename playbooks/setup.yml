---
- hosts: '{{ hosts | default("all") }}'
  pre_tasks:
    - name: "Install python and python-dnf"
      raw: test -e /usr/bin/python || (dnf install python python-dnf -y)
      become: yes
  become: '{{ become | default("no") }}'
  become_user: '{{ become_user | default("root") }}'
  remote_user: '{{ remote_user | default("root") }}'
  gather_facts: '{{ gather_facts | default("yes") }}'
  environment:
    MINISHIFT_GITHUB_API_TOKEN: '{{ github_token | default("") }}'
  roles:
    - { role: clean, when: skip_clean|bool == false }
    - { role: prereqs, when: skip_prereqs|bool == false }
    - { role: artifacts, when: skip_artifacts|bool == false }
    - { role: minishift, when: skip_minishift|bool == false }
